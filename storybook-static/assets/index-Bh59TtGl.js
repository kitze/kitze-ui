import{r as n}from"./index-BAAwwy_G.js";import{c as M,f as N,d as O,P as S,a as I,e as A}from"./index-rwsT5t3y.js";import{u as B}from"./index-CMCTO2iX.js";import{j as l}from"./jsx-runtime-DPtPVAOg.js";function H(e){const r=n.useRef({value:e,previous:e});return n.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}var y="Checkbox",[K,J]=M(y),[L,q]=K(y),j=n.forwardRef((e,r)=>{const{__scopeCheckbox:t,name:u,checked:p,defaultChecked:s,required:h,disabled:i,value:C="on",onCheckedChange:b,form:d,...x}=e,[c,m]=n.useState(null),v=N(r,o=>m(o)),E=n.useRef(!1),P=c?d||!!c.closest("form"):!0,[f=!1,R]=O({prop:p,defaultProp:s,onChange:b}),D=n.useRef(f);return n.useEffect(()=>{const o=c==null?void 0:c.form;if(o){const k=()=>R(D.current);return o.addEventListener("reset",k),()=>o.removeEventListener("reset",k)}},[c,R]),l.jsxs(L,{scope:t,state:f,disabled:i,children:[l.jsx(S.button,{type:"button",role:"checkbox","aria-checked":a(f)?"mixed":f,"aria-required":h,"data-state":_(f),"data-disabled":i?"":void 0,disabled:i,value:C,...x,ref:v,onKeyDown:I(e.onKeyDown,o=>{o.key==="Enter"&&o.preventDefault()}),onClick:I(e.onClick,o=>{R(k=>a(k)?!0:!k),P&&(E.current=o.isPropagationStopped(),E.current||o.stopPropagation())})}),P&&l.jsx(z,{control:c,bubbles:!E.current,name:u,value:C,checked:f,required:h,disabled:i,form:d,style:{transform:"translateX(-100%)"},defaultChecked:a(s)?!1:s})]})});j.displayName=y;var g="CheckboxIndicator",w=n.forwardRef((e,r)=>{const{__scopeCheckbox:t,forceMount:u,...p}=e,s=q(g,t);return l.jsx(A,{present:u||a(s.state)||s.state===!0,children:l.jsx(S.span,{"data-state":_(s.state),"data-disabled":s.disabled?"":void 0,...p,ref:r,style:{pointerEvents:"none",...e.style}})})});w.displayName=g;var z=e=>{const{control:r,checked:t,bubbles:u=!0,defaultChecked:p,...s}=e,h=n.useRef(null),i=H(t),C=B(r);n.useEffect(()=>{const d=h.current,x=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(x,"checked").set;if(i!==t&&m){const v=new Event("click",{bubbles:u});d.indeterminate=a(t),m.call(d,a(t)?!1:t),d.dispatchEvent(v)}},[i,t,u]);const b=n.useRef(a(t)?!1:t);return l.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:p??b.current,...s,tabIndex:-1,ref:h,style:{...e.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function a(e){return e==="indeterminate"}function _(e){return a(e)?"indeterminate":e?"checked":"unchecked"}var Q=j,U=w;export{U as I,Q as R};
